/*
    This file is meant to be ran on your local DB with PHPMyAdmin. This creates a set of normalized tables
    (no repetitive data/duplicate entries) with atomized attributes (no repetitive/duplicate *portions* of attributes).
    A function in the data layer has been created to query these tables to form a listing object.

*/

CREATE TABLE instrument
(
	instID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	instType VARCHAR(20)
);

CREATE TABLE brand
(
	brandID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	brandName VARCHAR(20)
);

CREATE TABLE specKey
(
	specKeyID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	specKeyName VARCHAR(20)
);

CREATE TABLE specVal
(
	specValID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	specValName VARCHAR(20),
    specKeyID INT,
	FOREIGN KEY (specKeyID) REFERENCES specKey(specKeyID)
);

CREATE TABLE specValLst
(
	lstID INT NOT NULL,
	specValID INT NOT NULL,
	FOREIGN KEY (specID) REFERENCES listing(specID),
	FOREIGN KEY (specValID) REFERENCES specVal(specValID),
	PRIMARY KEY (specID, specValID)
);

CREATE TABLE listing
(
	lstID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	lstCode VARCHAR(10),
	lstName VARCHAR(30),
	lstPrice DECIMAL(6,2),
	lstSale DECIMAL(2,2),
	lstDesc TEXT(500),
    brandID INT,
    instID INT,
	FOREIGN KEY (brandID) REFERENCES brand(brandID),
	FOREIGN KEY (instID) REFERENCES instrument(instID)
);

INSERT INTO listing (lstCode, lstName, lstPrice, lstSale, lstDesc, brandID, instID)
VALUES ('fp-90', 'FP-90', '1999.99', '0.7', 'Introducing the Roland FP-90: Where innovation meets performance,
this digital piano redefines excellence in music creation. Boasting an advanced sound engine, the FP-90 delivers
stunningly authentic piano tones with unparalleled expressiveness. Its sleek and portable design makes it perfect
for both stage and studio use, while its intuitive interface ensures effortless navigation. With a wide range of
built-in features including Bluetooth connectivity and versatile recording options, the Roland FP-90 empowers
musicians of all levels to unleash their creativity with unmatched precision and clarity.', 1, 1);

INSERT INTO brand (brandName)
VALUES ('Roland');

INSERT INTO instrument ()
VALUES ();

INSERT INTO specKey ()
VALUES ();

INSERT INTO specVal ()
VALUES();

INSERT INTO specValLst ()
VALUES ();